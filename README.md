 # request_logic_VM
---
This is the directory for all MRSTV logic  
 Repo Creation Date 10/13/24  

## Contributors
Dante Gordon dxg2@students.uwf.edu  
Devan Rivera dmr76@students.uwf.edu




## VENDING_LOGIC

#### Dante Gordon
### Overview:  
The intention of this program is to run as a beta of the vending logic used for communicating with the customer. 
Currently the program supports parsing and checking strings for a few key words. These key words will be used to navigate a tree data structure representing menus in which to communicate with the machine. These will include a  main menu which will act as the root node of the tree with pointers to each of the submenus. These submenus will include the menus for each type of snack as well as a help menu.

### Dev Info:
Compile the tokenizer using:
make -f token.mk

run tokenizer:
./main 
for debug mode
./main -d 

### Program History:
11/14/24 
*Dante Gordon*:
Basic loop created,
The program requests a string from the command line. and compares each token to certain request words
currently there is an error with the token vector where it the tokens have changed unexpectedly  

1/23/25  
*Dante Gordon*:
Fixed vector error working on implementing menu data structure

1/24/25
*Dante Gordon*:  
Started header for tree, and node classes
Added plaintext tree config plan

1/25/25
*Devan Rivera*:
Worked on Node class (node.hpp)
Worked on Tree class (menu-tree.hpp)

1/28/25
*Devan Rivera*:
Worked on Node class (node.cpp)
Worked on Tree class (menu-tree.cpp)

2/2/25 
*Devan Rivera*:
Implemented Tree manipulation functions 
Fixed general errors within Node class

2/3/25
*Devan Rivera*:
Began creating Main menu to take in cin to travel the tree
Fixed general errors within Tree class
Updated Makefile to accomodate for the Tree and Node class
Updated main.cpp to accomodate for the Main Menu

2/4/25
*Devan Rivera*
Identified Makefile Errors
Began Debugging of Main Menu 
Corrected Minor Errors in Main Driver

2/6/25
*Devan Rivera*
Fixed Clean Rule in Makefile
Finsished Most Debugging of Main Menu

2/7/25
*Dante Gordon*:  
Tokenizer patch for unpredictable output  

2/8/25
*Dante Gordon*: 
Patched bugs, completed vending selection sequence 
Unified menu tree with vendor 
Still need dispense, Pay, Audio

2/17/25
*Devan Rivera*
Removed unecessary functionality
Began Dispense and Pay functions
Updated helper functions for the node class

2/24/25
*Dante Gordon*:  
Integrated transcription instead of command line prompts.  
Removed namespaces and adjusted product names to better align  
with whispers output.

## CAPTURE

#### Dante Gordon
### Overview:

This program is inteded to handle the audio programming necessary for interacting with machine via voice. 
Currently the beta I programmed runs as its own executable and supports the generation of multiple audio files via communication with the command line. 
This must eventually be adapted to handle the initiation of recording, saving of files and transcribing using Whisper.cpp when necessary in our vending logic


### Dev Info:
*Dante Gordon*:
compile with mingw using: 

make -f audio.mk

run with: 
./main

to remove unused files:

make clean -f audio.mk

### Program History:
1/17/25
*Dante Gordon*:
Added miniaudio beta

1/23/25
*Dante Gordon*:
Multifile added
Needs  Interfacing, and file conversion, adaption to linux and transcribing etc.

1/25/25
*Dante Gordon*:  
Adjusted format to be compatible with whisper.cpp. Used a file generated by audio_test to be transcribed by whisper  
It worked well, the total time for whisper to process one 18 sec query was 1.47 serconds. More data 
2/5/25
*Dante Gordon*:  
Audio buffer created. Supports a 10 file buffer of 5 second clips, upon reaching the 10th file the buffer overrides  
older files starting from the first file. 

2/6/25
*Devan Rivera*
Researched Arguments and Methods to use in whisper.cpp
(Plan to add notes file)

2/17/25
*Dante Gordon*:  
Fully integrated with whisper. section closed  

## SERIAL

#### Dante Gordon
### Overview:
This program will be intended to initiate a serial connection via usb with the MDB interface. 
It will interface with the vending algorithm and send the correct commands via the serial connection
This must be done for a linux system, complications may occur using a linux subsystem




### Program History:
1/17/25
*Dante Gordon*:
folder created

MDB device Serial communication information
Baudrate - 115200
Data bits - 8
Parity - none
Stop Bits - 1

Need Linux Machine

1/30/25 
*Dante Gordon*:  
Fleshing out and annotating serial connection using POSIX commands

2/17/25
*Devan Rivera*:
Researched possible MDB commands to be passed through qibbix to the card reader

2/18/25
*Devan Rivera*:
Determined appropriate command format through Generic Master
Began Setup/Config Process Commands

2/23/25
Setup/Config Process Commands
Vend Process Commands

2/24/25
*Dante Gordon*: 
Crypto Key error fixed
Full vend communication testing can begin 

## Whisper
### Overview
Capture and transcription program is written.  
Upon running the program the users voice is recorded and echoed to the command line.  
Clip sizes are adjustable but are currently set to 5 seconds. This will be tweaked as we
go on the process of unifying this program and the main program has begun. 
### Dev Info

compile: 

cd whisper.cpp-master
make base.en
cd ..
make voice_assistant -f whisper.mk 

pre-run:  
export LD_LIBRARY_PATH=./whisper.cpp-master/build/src:$LD_LIBRARY_PATH

*WIP*:  
Potential removal of the former:  
echo 'export LD_LIBRARY_PATH=./whisper.cpp-master/build/src:$LD_LIBRARY_PATH' >> ~/.bashrc
source ~/.bashrc  

run:  
./voice_assistant

### Program History
2/7/25
*Dante Gordon*:  
working on initializing whisper. Needs more dependencies I think  

2/8/25
*Dante Gordon*:  
Building steps complete working on programming live audio transcription

2/9/25
*Dante Gordon*:  
Transcription complete whisper stores transcription in char* segments  

2/12/26
*Dante Gordon*:  
Begin unifying capture and transcription  
Convert filename vector to linked list Where the capture adds new nodes and follows  
the tail of the linked list and the transcriber reads the file at the head before deleting  
that node from the list  

2/17/26
*Dante Gordon*:  
Fully unified capture and transcription

2/24/25
*Dante Gordon*:  
Unified with main vending logic  
Program history will remain open to address changes in latency.  
Strategy to try to reduce this is padding the audio files allowing the recordings to be done faster  
